&ACCESS  RV
&PARAM DISKPATH = VW_User/Applikation/Nieten
&PARAM TPVW_VERSION = 8.3.0
&REL 200
DEFDAT  vw_nz_usr_s PUBLIC
; 
;*-----------------------------------------------------*
;*Technologiepaket Nieten                              *
;*                                                     *
;*Konzernstandard                                      *
;*Bearbeiter: W. Lehmeier I/PG-C61                     *
;*                                                     *
;* Erstellt am:                                        *
;* 2015.02.09 LE                                       *
;* 2016_05_10 EA Doppelte HAND und TAST Variablen entf.*
;*                                                     *
;*------------------------------------------------------
; 
;FOLD USER_Version
STRUC _Tech_Nieten CHAR Name[20],INT Datum
DECL _Tech_Nieten Tech_Nieten
;ENDFOLD
; 
;FOLD Konfiguration Ein-Ausgaenge NZ1 Servo
GLOBAL BOOL MIT_NZ1_Serv=FALSE
; 
SIGNAL NZ1_Servo_ZCode $OUT[1241]  TO $OUT[1243]
;SIGNAL sig4_sollpos $OUT[1217]  TO $OUT[1231]
;SIGNAL sig4_istpos $IN[1217]  TO $IN[1231]
; 
;Punkt- und Fzg-Typ-Nr an SPS
SIGNAL P_PktNr_SPS $OUT[97]  TO $OUT[112]
;Servo
SIGNAL SNZ1_P_Nr $OUT[1201]  TO $OUT[1216]
SIGNAL SNZ1_P2_Nr $OUT[1249]  TO $OUT[1264]
;pneumohydraulisch
SIGNAL PNZ1_P_Nr $OUT[1217]  TO $OUT[1232]
;Punktnummer an SPS
SIGNAL NZ_PktNr_SPS $OUT[97]  TO $OUT[112]
;Sollposition Nieten
SIGNAL NZ1_sollPos $OUT[1217]  TO $OUT[1232]
;Istposition Nieten
SIGNAL NZ1_istPos $IN[1217]  TO $IN[1232]

GLOBAL INT F_NZ1_FK=406
GLOBAL INT F_NZ1_nio=407
GLOBAL INT F_NZ1_def=408
GLOBAL INT F_NZ1_Sammel=410
GLOBAL INT F_NZ1_InPOS=416
GLOBAL INT F_m_NZ1_Serv=534
; 
GLOBAL INT I_NZ1_oh_Fue=193
GLOBAL INT I_NZ1_bereit=1185
GLOBAL INT I_NZ1_Re_aus=1187
GLOBAL INT I_NZ1_Auto=1193
GLOBAL INT I_NZ1_ref=1194
GLOBAL INT I_NZ1_aktiv=1195
GLOBAL INT I_NZ1_IPos_g=1196
GLOBAL INT I_NZ1_auf=1197
GLOBAL INT I_NZ1_zu=1198
GLOBAL INT I_NZ1_Vorz=1232
GLOBAL INT I_NZ1_LBit=1233
GLOBAL INT I_NZ1_GCodW1=1246
GLOBAL INT I_NZ1_GCodW2=1247
GLOBAL INT I_NZ1_GCodW4=1248
GLOBAL INT I_NZ1_W_SZ=1249
GLOBAL INT I_NZ1_W_Schm=1250
GLOBAL INT I_NZ1_W_Tool=1251
GLOBAL INT I_NZ1_F_Prog=1252
GLOBAL INT I_NZ1_F_Ziel=1253
GLOBAL INT I_NZ1_F_Baut=1254
GLOBAL INT I_NZ1_F_schw=1255
GLOBAL INT I_NZ1_F_Kr_n=1256
GLOBAL INT I_NZ1_F_Kr_h=1257
GLOBAL INT I_NZ1_F_Schl=1259
GLOBAL INT I_NZ1_F_Sich=1260
GLOBAL INT I_NZ1_F_Regl=1261
GLOBAL INT I_NZ1_F_Phas=1262
GLOBAL INT I_NZ1_F_Mot=1263
GLOBAL INT I_NZ1_Sammel=1264
; 
GLOBAL INT O_NZ1_P_akt=193
GLOBAL INT O_NZ1_nio=195
GLOBAL INT O_NZ1_W_SZ=196
GLOBAL INT O_NZ1_F_Kr_n=197
GLOBAL INT O_NZ1_F_Kr_h=198
GLOBAL INT O_NZ1_F_Prog=200
GLOBAL INT O_NZ1_F_Ziel=201
GLOBAL INT O_NZ1_F_schw=202
GLOBAL INT O_NZ1_W_Tool=203
GLOBAL INT O_NZ1_Z_def=204
GLOBAL INT O_NZ1_F_Betr=207
GLOBAL INT O_NZ1_Sammel=208
GLOBAL INT O_NZ1_E_Mode=1186
GLOBAL INT O_NZ1_Re_aus=1187
GLOBAL INT O_NZ1_oh_Fue=1188
GLOBAL INT O_NZ1_m_Prog=1189
GLOBAL INT O_NZ1_R_Hand=1192
GLOBAL INT O_NZ1_R_Auto=1193
GLOBAL INT O_NZ1_ref=1194
GLOBAL INT O_NZ1_FRG=1195
GLOBAL INT O_NZ1_SPos_g=1196
GLOBAL INT O_NZ1_auf=1197
GLOBAL INT O_NZ1_zu=1198
GLOBAL INT O_NZ1_t_auf=1199
GLOBAL INT O_NZ1_t_zu=1200
GLOBAL INT O_NZ1_LBit=1233
GLOBAL INT O_NZ1_D_Auf=4010
GLOBAL INT O_NZ1_Du_Zu=4011
;ENDFOLD
; 
;FOLD Konfiguration Ein-Ausgaenge NZ2 Servo
GLOBAL BOOL MIT_NZ2_Serv=FALSE
; 
SIGNAL NZ2_Servo_ZCode $OUT[1321]  TO $OUT[1323]
;SIGNAL sig5_sollpos $OUT[1297]  TO $OUT[1311]
;SIGNAL sig5_istpos $IN[1297]  TO $IN[1311]
; 
;Servo
SIGNAL SNZ2_P_Nr $OUT[1281]  TO $OUT[1296]
SIGNAL SNZ2_P2_Nr $OUT[1329]  TO $OUT[1344]
;pneumohydraulisch
SIGNAL PNZ2_P_Nr $OUT[1297]  TO $OUT[1312]
;Sollposition Nieten
SIGNAL NZ2_sollPos $OUT[1297]  TO $OUT[1312]
;Istposition Nieten
SIGNAL NZ2_istPos $IN[1297]  TO $IN[1312]
; 
GLOBAL INT F_NZ2_FK=427
GLOBAL INT F_NZ2_nio=428
GLOBAL INT F_NZ2_def=429
GLOBAL INT F_NZ2_Sammel=430
GLOBAL INT F_NZ2_InPOS=433
GLOBAL INT F_m_NZ2_Serv=536
; 
GLOBAL INT I_NZ2_oh_Fue=177
GLOBAL INT I_NZ2_bereit=1265
GLOBAL INT I_NZ2_Re_aus=1267
GLOBAL INT I_NZ2_Auto=1273
GLOBAL INT I_NZ2_ref=1274
GLOBAL INT I_NZ2_aktiv=1275
GLOBAL INT I_NZ2_IPos_g=1276
GLOBAL INT I_NZ2_auf=1277
GLOBAL INT I_NZ2_zu=1278
GLOBAL INT I_NZ2_Vorz=1312
GLOBAL INT I_NZ2_LBit=1313
GLOBAL INT I_NZ2_GCodW1=1326
GLOBAL INT I_NZ2_GCodW2=1327
GLOBAL INT I_NZ2_GCodW4=1328
GLOBAL INT I_NZ2_W_SZ=1329
GLOBAL INT I_NZ2_W_Schm=1330
GLOBAL INT I_NZ2_W_Tool=1331
GLOBAL INT I_NZ2_F_Prog=1332
GLOBAL INT I_NZ2_F_Ziel=1333
GLOBAL INT I_NZ2_F_Baut=1334
GLOBAL INT I_NZ2_F_schw=1335
GLOBAL INT I_NZ2_F_Kr_n=1336
GLOBAL INT I_NZ2_F_Kr_h=1337
GLOBAL INT I_NZ2_F_Schl=1339
GLOBAL INT I_NZ2_F_Sich=1340
GLOBAL INT I_NZ2_F_Regl=1341
GLOBAL INT I_NZ2_F_Phas=1342
GLOBAL INT I_NZ2_F_Mot=1343
GLOBAL INT I_NZ2_Sammel=1344
; 
GLOBAL INT O_NZ2_P_akt=177
GLOBAL INT O_NZ2_nio=179
GLOBAL INT O_NZ2_W_SZ=180
GLOBAL INT O_NZ2_F_Kr_n=181
GLOBAL INT O_NZ2_F_Kr_h=182
GLOBAL INT O_NZ2_F_Prog=184
GLOBAL INT O_NZ2_F_Ziel=185
GLOBAL INT O_NZ2_F_schw=186
GLOBAL INT O_NZ2_W_Tool=187
GLOBAL INT O_NZ2_Z_def=188
GLOBAL INT O_NZ2_F_Betr=191
GLOBAL INT O_NZ2_Sammel=192
GLOBAL INT O_NZ2_E_Mode=1266
GLOBAL INT O_NZ2_Re_aus=1267
GLOBAL INT O_NZ2_oh_Fue=1268
GLOBAL INT O_NZ2_m_Prog=1269
GLOBAL INT O_NZ2_R_Hand=1272
GLOBAL INT O_NZ2_R_Auto=1273
GLOBAL INT O_NZ2_ref=1274
GLOBAL INT O_NZ2_FRG=1275
GLOBAL INT O_NZ2_SPos_g=1276
GLOBAL INT O_NZ2_auf=1277
GLOBAL INT O_NZ2_zu=1278
GLOBAL INT O_NZ2_t_auf=1279
GLOBAL INT O_NZ2_t_zu=1280
GLOBAL INT O_NZ2_LBit=1313
GLOBAL INT O_NZ2_D_Auf=4012
GLOBAL INT O_NZ2_Du_Zu=4013
;ENDFOLD
; 
;FOLD Konfiguration Ein-Ausgaenge NZ1 Hydr.
;Zangencode an NZ1 hydraulisch
SIGNAL NZ1_hyd_ZCode $OUT[1213]  TO $OUT[1215]
; 
GLOBAL BOOL MIT_NZ1_Hydr=FALSE
GLOBAL BOOL B_NZ1_Hilf=FALSE
; 
GLOBAL INT F_m_NZ1_Hydr=535
; 
GLOBAL INT I_NZ1_oh_Fu2=193
GLOBAL INT I_NZ1_F_Bet2=1185
GLOBAL INT I_NZ1_H_LBit=1187
GLOBAL INT I_NZ1_W_SZ2=1188
GLOBAL INT I_NZ1_F_Sta2=1193
GLOBAL INT I_NZ1_H_verb=1202
GLOBAL INT I_NZ1_H_Samm=1216
; 
GLOBAL INT O_NZ1_nio2=195
GLOBAL INT O_NZ1_W_SZ2=196
GLOBAL INT O_NZ1_F_Klem=197
GLOBAL INT O_NZ1_F_Sta2=198
GLOBAL INT O_NZ1_F_Bet2=199
GLOBAL INT O_NZ1_Samel2=200
GLOBAL INT O_NZ1_oh_Fu2=1186
GLOBAL INT O_NZ1_H_LBit=1187
GLOBAL INT O_NZ1_H_E_Mo=1188
GLOBAL INT O_NZ1_N_Hand=1189
GLOBAL INT O_NZ1_N_Auto=1190
GLOBAL INT O_NZ1_H_Sta2=1193
GLOBAL INT O_NZ1_V_ausf=1194
GLOBAL INT O_NZ1_N_ausf=1195
GLOBAL INT O_NZ1_N_einf=1196
GLOBAL INT O_NZ1_M_wegs=1197
GLOBAL INT O_NZ1_M_anle=1198
;ENDFOLD
; 
;FOLD Konfiguration Ein-Ausgaenge NZ2 Hydr.
;Zangencode an NZ2 hydraulisch
SIGNAL NZ2_hyd_ZCode $OUT[1293]  TO $OUT[1295]
; 
GLOBAL BOOL MIT_NZ2_Hydr=FALSE
GLOBAL BOOL B_NZ2_Hilf=FALSE
; 
GLOBAL INT F_m_NZ2_Hydr=537
; 
GLOBAL INT I_NZ2_oh_Fu2=177
GLOBAL INT I_NZ2_F_Bet2=1265
GLOBAL INT I_NZ2_H_LBit=1267
GLOBAL INT I_NZ2_W_SZ2=1268
GLOBAL INT I_NZ2_F_Sta2=1273
GLOBAL INT I_NZ2_H_Samm=1296
; 
GLOBAL INT O_NZ2_nio2=179
GLOBAL INT O_NZ2_W_SZ2=180
GLOBAL INT O_NZ2_F_Klem=181
GLOBAL INT O_NZ2_F_Sta2=182
GLOBAL INT O_NZ2_F_Bet2=183
GLOBAL INT O_NZ2_Samel2=184
GLOBAL INT O_NZ2_oh_Fu2=1266
GLOBAL INT O_NZ2_H_LBit=1267
GLOBAL INT O_NZ2_H_E_Mo=1268
GLOBAL INT O_NZ2_N_Hand=1269
GLOBAL INT O_NZ2_N_Auto=1270
GLOBAL INT O_NZ2_H_Sta2=1273
GLOBAL INT O_NZ2_V_ausf=1274
GLOBAL INT O_NZ2_N_ausf=1275
GLOBAL INT O_NZ2_N_einf=1276
GLOBAL INT O_NZ2_M_wegs=1277
GLOBAL INT O_NZ2_M_anle=1278
;ENDFOLD
; 
;FOLD Zangenfunktion
GLOBAL BOOL HA1_FKT_NZ1=FALSE
GLOBAL BOOL HA2_FKT_NZ1=FALSE
GLOBAL BOOL HA1_FKT_NZ2=FALSE
GLOBAL BOOL HA2_FKT_NZ2=FALSE
GLOBAL BOOL TA1_AKT_NZ1=FALSE
GLOBAL BOOL TA1_AKT_NZ2=FALSE
;ENDFOLD
; 
GLOBAL INT TimerNr_NZ1=48395
GLOBAL INT TimerNr_NZ2=48396
; 
;FOLD Lebensbit NZ
BOOL LBitState[2]
LBitState[1]=FALSE
LBitState[2]=FALSE
BOOL NZ_LBitFeh[2]
NZ_LBitFeh[1]=FALSE
NZ_LBitFeh[2]=FALSE
; 
;Lebensbit an NZ-Steuerung --- Ausgaenge ---Servo
INT LBitToNZ[2]
LBitToNZ[1]=1233
LBitToNZ[2]=1313
;Lebensbit an NZ-Steuerung --- Ausgaenge ---Hydr
INT LBitToNZH[2]
LBitToNZH[1]=1187
LBitToNZH[2]=1267
; 
;Lebensbit von NZ-Steuerung --- Eingaenge ---Servo
INT LBitFromNZ[2]
LBitFromNZ[1]=1233
LBitFromNZ[2]=1313
;Lebensbit von NZ-Steuerung --- Eingaenge ---Hydr
INT LBitFromNZH[2]
LBitFromNZH[1]=1187
LBitFromNZH[2]=1267
; 
INT LBitTimeCnt[2]
LBitTimeCnt[1]=-1
LBitTimeCnt[2]=-1
INT ErrNZNr=-1
;ENDFOLD
; 
;FOLD Meldungsausgabe
ENUM NZS_MsgType StateMsg,QuitMsg,NotifyMsg
GLOBAL INT n_NZS_Handle[100]
GLOBAL INT n_NZR_Handle[100]
INT nMsgNum=0
INT RemMsgNum=0
;ENDFOLD
; 
ENDDAT
