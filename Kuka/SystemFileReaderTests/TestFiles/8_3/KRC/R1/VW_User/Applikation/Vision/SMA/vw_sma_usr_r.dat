&ACCESS  R
&COMMENT KS_1.1
&PARAM DISKPATH = VW_User/Applikation/Vision/SMA
&PARAM TPVW_VERSION = 8.3.8
&REL 49
DEFDAT  vw_sma_usr_r PUBLIC
; FOLD ;%{H}%MKUKATPVW
; ENDFOLD

;Spaltmessanlage 
;***************************************
; Paket:    VMT SMA
; Funktion: Spaltvermessung
; Version:  VKRC4
; Name:     T.Schulz
; Datum:    06.06.2012
; Aenderung: 06.06.2012 Erstellung
;****************************************
;FOLD VMT SMA

;FOLD USER_Version
GLOBAL INT Ver_Tech_SMA=20120919

;FOLD SMA Init
GLOBAL BOOL B_MIT_SMA=FALSE
GLOBAL INT F_m_SMA=233
;ENDFOLD

;FOLD Signaldefinition
SIGNAL SMA_CMD $OUT[1945]  TO $OUT[1952]
SIGNAL SMA_TypeID $OUT[1953]  TO $OUT[1960]
SIGNAL SMA_PosID $OUT[1961]  TO $OUT[1968]
SIGNAL SMA_RECORDBIT1 $OUT[1969]
SIGNAL SMA_Strobe $OUT[1970]
SIGNAL SMA_BodyNo $OUT[1977]  TO $OUT[2008]
SIGNAL VMT_SMA_PosX1 $OUT[2009]  TO $OUT[2040]
SIGNAL VMT_SMA_PosY1 $OUT[2041]  TO $OUT[2072]
SIGNAL VMT_SMA_PosZ1 $OUT[2073]  TO $OUT[2104]

SIGNAL VMT_SMA_Ack $IN[1945]
SIGNAL VMT_SMA_State $IN[1953]  TO $IN[1960]
;ENDFOLD

;FOLD Kommandos
CONST INT CMD_SMA_Init_Type=1
CONST INT CMD_SMA_End_Type=2
CONST INT CMD_SMA_Position_Init=3
;ENDFOLD

;FOLD Timer
REAL SMA_TIMEOUT=500.000
INT SMA_TIMER_NR=10
;ENDFOLD

;FOLD Errorhandling
GLOBAL BOOL Recordbitbusy[2]
Recordbitbusy[1]=FALSE
Recordbitbusy[2]=FALSE
GLOBAL BOOL VMT_SMA_Timeout=FALSE
GLOBAL BOOL VMT_SMA_Error=FALSE
BOOL VMT_SMA_COM_RDY=TRUE
;ENDFOLD

;FOLD Variablen, Faktoren und Puffer
GLOBAL INT VMT_SMA_BodyNo=1007551
CONST INT VMT_SMA_Pos_Con_Fac=1000
INT VMT_SMA_POSID
INT VMT_SMA_TYPEID
;ENDFOLD

;ENDFOLD ;VMT SMA

ENDDAT