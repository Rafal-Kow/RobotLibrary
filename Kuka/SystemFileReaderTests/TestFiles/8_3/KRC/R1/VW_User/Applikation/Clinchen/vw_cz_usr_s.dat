&ACCESS  RV
&PARAM DISKPATH = VW_User/Applikation/Clinchen
&PARAM TPVW_VERSION = 8.3.8
&REL 200
DEFDAT  vw_cz_usr_s PUBLIC
; 
;*-----------------------------------------------------*
;*Technologiepaket Clinchen                            *
;*                                                     *
;*Konzernstandard                                      *
;*Bearbeiter: W. Lehmeier I/PG-C61                     *
;*                                                     *
;* Erstellt am:                                        *
;* 2015.02.09 LE                                       *
;*                                                     *
;*------------------------------------------------------
; 
;FOLD USER_Version
STRUC _Tech_Clinchen CHAR Name[20],INT Datum
DECL _Tech_Clinchen Tech_Clinchen
;ENDFOLD
; 
;FOLD Ein-Ausgaenge CZ1 Servo
; 
GLOBAL BOOL MIT_CZ1_Serv=FALSE
; 
SIGNAL sig6_sollpos $OUT[1377]  TO $OUT[1391]
SIGNAL sig6_istpos $IN[1377]  TO $IN[1391]
SIGNAL CZ1_Servo_ZCode $OUT[1401]  TO $OUT[1403]
; 
GLOBAL INT F_CZ1_FK=447
GLOBAL INT F_CZ1_nio=448
GLOBAL INT F_CZ1_def=449
GLOBAL INT F_CZ1_Feh=452
GLOBAL INT F_CZ1_Sammel=453
GLOBAL INT F_m_CZ1_Serv=538
GLOBAL INT F_CZ_FRG_Prozes=740
; 
GLOBAL INT I_CZ1_oh_Fue=177
GLOBAL INT I_CZ1_bereit=1345
GLOBAL INT I_CZ1_Re_aus=1347
GLOBAL INT I_CZ1_Auto=1353
GLOBAL INT I_CZ1_ref=1354
GLOBAL INT I_CZ1_aktiv=1355
GLOBAL INT I_CZ1_IPos_g=1356
GLOBAL INT I_CZ1_auf=1357
GLOBAL INT I_CZ1_zu=1358
GLOBAL INT I_CZ1_Vorz=1392
GLOBAL INT I_CZ1_LBit=1393
GLOBAL INT I_CZ1_GCodW1=1406
GLOBAL INT I_CZ1_GCodW2=1407
GLOBAL INT I_CZ1_GCodW4=1408
GLOBAL INT I_CZ1_W_SZ=1409
GLOBAL INT I_CZ1_W_Schm=1410
GLOBAL INT I_CZ1_W_Tool=1411
GLOBAL INT I_CZ1_F_Prog=1412
GLOBAL INT I_CZ1_F_Ziel=1413
GLOBAL INT I_CZ1_F_Baut=1414
GLOBAL INT I_CZ1_F_schw=1415
GLOBAL INT I_CZ1_F_Kr_n=1416
GLOBAL INT I_CZ1_F_Kr_h=1417
GLOBAL INT I_CZ1_F_Schl=1419
GLOBAL INT I_CZ1_F_Sich=1420
GLOBAL INT I_CZ1_F_Regl=1421
GLOBAL INT I_CZ1_F_Phas=1422
GLOBAL INT I_CZ1_F_Mot=1423
GLOBAL INT I_CZ1_Sammel=1424
; 
GLOBAL INT O_CZ1_P_akt=177
GLOBAL INT O_CZ1_nio=179
GLOBAL INT O_CZ1_W_SZ=180
GLOBAL INT O_CZ1_F_Kr_n=181
GLOBAL INT O_CZ1_F_Kr_h=182
GLOBAL INT O_CZ1_F_Prog=184
GLOBAL INT O_CZ1_F_Ziel=185
GLOBAL INT O_CZ1_F_schw=186
GLOBAL INT O_CZ1_W_Tool=187
GLOBAL INT O_CZ1_Mat_Ue=188
GLOBAL INT O_CZ1_F_Betr=191
GLOBAL INT O_CZ1_Sammel=192
GLOBAL INT O_CZ1_E_Mode=1346
GLOBAL INT O_CZ1_Re_aus=1347
GLOBAL INT O_CZ1_oh_Fue=1348
GLOBAL INT O_CZ1_m_Prog=1349
GLOBAL INT O_CZ1_R_Hand=1352
GLOBAL INT O_CZ1_R_Auto=1353
GLOBAL INT O_CZ1_ref=1354
GLOBAL INT O_CZ1_FRG=1355
GLOBAL INT O_CZ1_SPos_g=1356
GLOBAL INT O_CZ1_auf=1357
GLOBAL INT O_CZ1_zu=1358
GLOBAL INT O_CZ1_t_auf=1359
GLOBAL INT O_CZ1_t_zu=1360
GLOBAL INT O_CZ1_LBit=1393
GLOBAL INT O_CZ1_ZCodW1=1401
GLOBAL INT O_CZ1_ZCodW2=1402
GLOBAL INT O_CZ1_ZCodW4=1403
GLOBAL INT O_CZ1_D_Auf=4014
GLOBAL INT O_CZ1_Du_Zu=4015
;ENDFOLD
; 
;FOLD Ein-Ausgaenge CZ2 Servo
; 
GLOBAL BOOL MIT_CZ2_Serv=FALSE
GLOBAL BOOL b_CZ_FRG_Prozes[4096]
; 
SIGNAL sig7_sollpos $OUT[1457]  TO $OUT[1471]
SIGNAL sig7_istpos $IN[1457]  TO $IN[1471]
SIGNAL CZ2_Servo_ZCode $OUT[1481]  TO $OUT[1483]
; 
GLOBAL INT F_CZ2_FK=468
GLOBAL INT F_CZ2_nio=469
GLOBAL INT F_CZ2_def=470
GLOBAL INT F_CZ2_Feh=472
GLOBAL INT F_CZ2_Sammel=473
GLOBAL INT F_m_CZ2_Serv=540
GLOBAL INT F_CZ_def[2]
F_CZ_def[1]=449
F_CZ_def[2]=470
; 
GLOBAL INT I_CZ2_oh_Fue=161
GLOBAL INT I_CZ2_bereit=1425
GLOBAL INT I_CZ2_Re_aus=1427
GLOBAL INT I_CZ2_Auto=1433
GLOBAL INT I_CZ2_ref=1434
GLOBAL INT I_CZ2_aktiv=1435
GLOBAL INT I_CZ2_IPos_g=1436
GLOBAL INT I_CZ2_auf=1437
GLOBAL INT I_CZ2_zu=1438
GLOBAL INT I_CZ2_Vorz=1472
GLOBAL INT I_CZ2_LBit=1473
GLOBAL INT I_CZ2_GCodW1=1486
GLOBAL INT I_CZ2_GCodW2=1487
GLOBAL INT I_CZ2_GCodW4=1488
GLOBAL INT I_CZ2_W_SZ=1489
GLOBAL INT I_CZ2_W_Schm=1490
GLOBAL INT I_CZ2_W_Tool=1491
GLOBAL INT I_CZ2_F_Prog=1492
GLOBAL INT I_CZ2_F_Ziel=1493
GLOBAL INT I_CZ2_F_Baut=1494
GLOBAL INT I_CZ2_F_schw=1495
GLOBAL INT I_CZ2_F_Kr_n=1496
GLOBAL INT I_CZ2_F_Kr_h=1497
GLOBAL INT I_CZ2_F_Schl=1499
GLOBAL INT I_CZ2_F_Sich=1500
GLOBAL INT I_CZ2_F_Regl=1501
GLOBAL INT I_CZ2_F_Phas=1502
GLOBAL INT I_CZ2_F_Mot=1503
GLOBAL INT I_CZ2_Sammel=1504
; 
GLOBAL INT O_CZ2_P_akt=161
GLOBAL INT O_CZ2_nio=163
GLOBAL INT O_CZ2_W_SZ=164
GLOBAL INT O_CZ2_F_Kr_n=165
GLOBAL INT O_CZ2_F_Kr_h=166
GLOBAL INT O_CZ2_F_Prog=168
GLOBAL INT O_CZ2_F_Ziel=169
GLOBAL INT O_CZ2_F_schw=170
GLOBAL INT O_CZ2_W_Tool=171
GLOBAL INT O_CZ2_Mat_Ue=172
GLOBAL INT O_CZ2_F_Betr=175
GLOBAL INT O_CZ2_Sammel=176
GLOBAL INT O_CZ2_E_Mode=1426
GLOBAL INT O_CZ2_Re_aus=1427
GLOBAL INT O_CZ2_oh_Fue=1428
GLOBAL INT O_CZ2_m_Prog=1429
GLOBAL INT O_CZ2_R_Hand=1432
GLOBAL INT O_CZ2_R_Auto=1433
GLOBAL INT O_CZ2_ref=1434
GLOBAL INT O_CZ2_FRG=1435
GLOBAL INT O_CZ2_SPos_g=1436
GLOBAL INT O_CZ2_auf=1437
GLOBAL INT O_CZ2_zu=1438
GLOBAL INT O_CZ2_t_auf=1439
GLOBAL INT O_CZ2_t_zu=1440
GLOBAL INT O_CZ2_LBit=1473
GLOBAL INT O_CZ2_ZCodW1=1481
GLOBAL INT O_CZ2_ZCodW2=1482
GLOBAL INT O_CZ2_ZCodW4=1483
GLOBAL INT O_CZ2_D_Auf=4016
GLOBAL INT O_CZ2_Du_Zu=4017
;ENDFOLD
; 
;FOLD Ein-Ausgaenge CZ1 Pneum.
; 
GLOBAL BOOL MIT_CZ1_Pneu=FALSE
GLOBAL BOOL B_CZ1_Hilf=FALSE
; 
GLOBAL INT F_m_CZ1_Pneu=539
; 
GLOBAL INT I_CZ1_oh_Fu2=177
GLOBAL INT I_CZ1_H_LBit=1347
GLOBAL INT I_CZ1_F_Druck=1362
GLOBAL INT I_CZ1_F_Arbs=1363
GLOBAL INT I_CZ1_F_Oel=1364
GLOBAL INT I_CZ1_F_EPWX=1365
GLOBAL INT I_CZ1_P_Samm=1368
; 
GLOBAL INT O_CZ1_F_EPWX=180
GLOBAL INT O_CZ1_F_Oel=181
GLOBAL INT O_CZ1_F_Druck=182
GLOBAL INT O_CZ1_P_MatU=183
GLOBAL INT O_CZ1_Samel2=184
GLOBAL INT O_CZ1_oh_Fu2=1346
GLOBAL INT O_CZ1_H_LBit=1347
GLOBAL INT O_CZ1_P_E_Mo=1348
GLOBAL INT O_CZ1_P_Hand=1349
GLOBAL INT O_CZ1_P_Auto=1350
GLOBAL INT O_CZ1_P_auf=1353
GLOBAL INT O_CZ1_P_Mit=1354
GLOBAL INT O_CZ1_P_zu=1355
GLOBAL INT O_CZ1_F_auf=1356
GLOBAL INT O_CZ1_F_zu=1357
;ENDFOLD
; 
;FOLD Ein-Ausgaenge CZ2 Pneum.
; 
GLOBAL BOOL MIT_CZ2_Pneu=FALSE
GLOBAL BOOL B_CZ2_Hilf=FALSE
; 
GLOBAL INT F_m_CZ2_Pneu=541
; 
GLOBAL INT I_CZ2_oh_Fu2=161
GLOBAL INT I_CZ2_H_LBit=1427
GLOBAL INT I_CZ2_F_Druck=1442
GLOBAL INT I_CZ2_F_Arbs=1443
GLOBAL INT I_CZ2_F_Oel=1444
GLOBAL INT I_CZ2_F_EPWX=1445
GLOBAL INT I_CZ2_P_Samm=1448
; 
GLOBAL INT O_CZ2_F_EPWX=164
GLOBAL INT O_CZ2_F_Oel=165
GLOBAL INT O_CZ2_F_Druck=166
GLOBAL INT O_CZ2_P_MatU=167
GLOBAL INT O_CZ2_Samel2=168
GLOBAL INT O_CZ2_oh_Fu2=1426
GLOBAL INT O_CZ2_H_LBit=1427
GLOBAL INT O_CZ2_P_E_Mo=1428
GLOBAL INT O_CZ2_P_Hand=1429
GLOBAL INT O_CZ2_P_Auto=1430
GLOBAL INT O_CZ2_P_auf=1433
GLOBAL INT O_CZ2_P_Mit=1434
GLOBAL INT O_CZ2_P_zu=1435
GLOBAL INT O_CZ2_F_auf=1436
GLOBAL INT O_CZ2_F_zu=1437
;ENDFOLD
; 
;FOLD Konfiguration Ein-Ausgaenge CZ1 Flatclinchen
; 
GLOBAL BOOL MIT_CZ1_Flat=FALSE
; 
GLOBAL INT F_m_CZ1_Flat=719
; Folgende Flags werden von Servoclinchzange 1 verwendet
; GLOBAL INT F_CZ1_def=449
; GLOBAL INT F_CZ1_Feh=452
; GLOBAL INT F_CZ1_Sammel=453
; 
GLOBAL INT I_CZF_oh_Fue=177
GLOBAL INT I_CZF_F_Oel=2200
; 
GLOBAL INT O_CZF_F_Oel=181
GLOBAL INT O_CZF_F_Druck=182
GLOBAL INT O_CZF_CZ_def=183
GLOBAL INT O_CZF_Samel=184
GLOBAL INT O_V_CZF=2193
GLOBAL INT O_CZF_P_auf=2195
GLOBAL INT O_CZF_P_Mit=2196
GLOBAL INT O_V_CZF_Bew=2197
;ENDFOLD
; 
;FOLD Zangenfunktion
GLOBAL BOOL HA1_FKT_CZ1=FALSE
GLOBAL BOOL HA2_FKT_CZ1=FALSE
GLOBAL BOOL HA1_FKT_CZ2=FALSE
GLOBAL BOOL HA2_FKT_CZ2=FALSE
GLOBAL BOOL TA1_AKT_CZ1=FALSE
GLOBAL BOOL TA1_AKT_CZ2=FALSE
;ENDFOLD
; 
;FOLD Lebensbit CZ
BOOL LBitState[2]
LBitState[1]=FALSE
LBitState[2]=FALSE
BOOL CZ_LBitFeh[2]
CZ_LBitFeh[1]=FALSE
CZ_LBitFeh[2]=FALSE
; 
;Lebensbit an CZ-Steuerung --- Ausgaenge ---Servo
INT LBitToCZ[2]
LBitToCZ[1]=1393
LBitToCZ[2]=1473
;Lebensbit an CZ-Steuerung --- Ausgaenge ---Pneumo
INT LBitToCZP[2]
LBitToCZP[1]=1347
LBitToCZP[2]=1427
; 
;Lebensbit von CZ-Steuerung --- Eingaenge ---Servo
INT LBitFromCZ[2]
LBitFromCZ[1]=1393
LBitFromCZ[2]=1473
;Lebensbit von CZ-Steuerung --- Eingaenge ---Pneumo
INT LBitFromCZP[2]
LBitFromCZP[1]=1347
LBitFromCZP[2]=1427
; 
INT LBitTimeCnt[2]
LBitTimeCnt[1]=-1
LBitTimeCnt[2]=-1
INT ErrCZNr=-1
;ENDFOLD
; 
;FOLD Meldungsausgabe
ENUM CZS_MsgType StateMsg,QuitMsg,NotifyMsg
GLOBAL INT n_CZS_Handle[100]
GLOBAL INT n_CZR_Handle[100]
INT nMsgNum=0
INT RemMsgNum=0
;ENDFOLD
; 
ENDDAT
